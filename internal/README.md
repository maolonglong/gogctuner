copied from https://github.com/uber-go/automaxprocs/tree/master/internal
